---
# List of libvirt package dependencies.
libvirt_host_libvirt_packages_default:
  - libvirt-bin
  - qemu-kvm
  - python-libvirt
  - python-lxml

# Packages that are only necessary if you require EFI support
libvirt_host_packages_efi:
  - ovmf

# List of all packages to install
libvirt_host_libvirt_packages: >
  {{ libvirt_host_libvirt_packages_default +
     (libvirt_host_packages_efi if libvirt_host_enable_efi_support else []) | unique
  }}

# These are passed to the lineinfile module to customize configuration files
libvirt_host_lineinfile_extra_rules:
  - args:
      path: /etc/default/libvirt-bin
      insertafter: '^#libvirtd_opts='
      regexp: '^libvirtd_opts='
      line: libvirtd_opts="{{ libvirt_host_libvirtd_args }}"
    condition: "{{ libvirt_host_libvirtd_args != '' }}"
